!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.poster=t():e.poster=t()}(this,(()=>(()=>{var e={753:function(e,t,n){e.exports=function(){"use strict";function e(e,n,r){return n=h(n),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,t()?Reflect.construct(n,r||[],h(e).constructor):n.apply(e,r))}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t=function(){return!!e})()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function d(e){return Number(e)===e&&e%1==0}function w(e){return Number(e)===e}function v(e){return"string"==typeof e}function g(e){return"boolean"==typeof e}function y(e){return e===1/0}function m(e){return"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return"function"==typeof e}function S(e){return e instanceof Uint8Array}function E(e){return void 0===e}function O(e){return null===e}function C(e){return e+3&-4}function x(e){return Object.prototype.hasOwnProperty.call(void 0!==n.g?n.g:window,e)}function P(e){if(d(e))return"i";if(t=e,Number(t)===t&&t%1!=0)return"f";if(v(e))return"s";if(S(e))return"b";if(g(e))return e?"T":"F";if(O(e))return"N";if(y(e))return"I";var t;throw new Error("OSC typeTag() found unknown value type")}function A(e){var t="";if(m(e))return"/".concat(e.join("/"));if(v(e))return(t=e).length>1&&"/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t.length>1&&"/"!==t[0]&&(t="/".concat(t)),t;throw new Error("OSC prepareAddress() needs addresses of type array or string")}function I(e){if(!v(e))throw new Error("OSC prepareRegExPattern() needs strings");return e.replace(/\./g,"\\.").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\{/g,"(").replace(/\}/g,")").replace(/,/g,"|").replace(/\[!/g,"[^").replace(/\?/g,".").replace(/\*/g,".*")}var j=c((function e(){s(this,e),this.data=[],this.byteLength=0}),[{key:"add",value:function(e){if(g(e)||y(e)||O(e))return this;var t=e.pack();return this.byteLength+=t.byteLength,this.data.push(t),this}},{key:"merge",value:function(){var e=new Uint8Array(this.byteLength),t=0;return this.data.forEach((function(n){e.set(n,t),t+=n.byteLength})),e}}]),M=c((function e(t){s(this,e),this.value=t,this.offset=0}),[{key:"pack",value:function(e,t){if(!e||!t)throw new Error("OSC Atomic cant't be packed without given method or byteLength");var n=new Uint8Array(t),r=new DataView(n.buffer);if(E(this.value))throw new Error("OSC Atomic cant't be encoded with empty value");return r[e](this.offset,this.value,!1),n}},{key:"unpackWithMethod",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(e&&t&&n))throw new Error("OSC Atomic cant't be unpacked without given dataView, method or byteLength");if(!(e instanceof DataView))throw new Error("OSC Atomic expects an instance of type DataView");return this.value=e[t](r,!1),this.offset=r+n,this.offset}}]),N=function(t){function n(t){if(s(this,n),t&&!d(t))throw new Error("OSC AtomicInt32 constructor expects value of type number");return e(this,n,[t])}return l(n,t),c(n,[{key:"pack",value:function(){return p(h(n.prototype),"pack",this).call(this,"setInt32",4)}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(h(n.prototype),"unpackWithMethod",this).call(this,e,"getInt32",4,t)}}])}(M),D="utf-8";var L=function(t){function n(t){if(s(this,n),t&&!v(t))throw new Error("OSC AtomicString constructor expects value of type string");return e(this,n,[t])}return l(n,t),c(n,[{key:"pack",value:function(){if(E(this.value))throw new Error("OSC AtomicString can not be encoded with empty value");for(var e="".concat(this.value,"\0"),t=C(e.length),n=new Uint8Array(t),r=0;r<e.length;r+=1)n[r]=e.charCodeAt(r);return n}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof DataView))throw new Error("OSC AtomicString expects an instance of type DataView");for(var n,r=t,o=[];r<e.byteLength;r+=1){if(0===(n=e.getUint8(r))){r+=1;break}o.push(n)}if(r===e.length)throw new Error("OSC AtomicString found a malformed OSC string");return this.offset=C(r),this.value=function(e){if(x("Buffer"))return Buffer.from(e).toString(D);if(x("TextDecoder"))return new TextDecoder(D).decode(new Int8Array(e));for(var t="",n=0;n<e.length;n+=65537)t+=String.fromCharCode.apply(null,e.slice(n,n+65537));return t}(o),this.offset}}])}(M),B=2208988800,H=4294967296,_=c((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(s(this,e),!d(t)||!d(n))throw new Error("OSC Timetag constructor expects values of type integer number");this.seconds=t,this.fractions=n}),[{key:"timestamp",value:function(e){var t;if("number"==typeof e){t=e/1e3;var n=Math.floor(t);return this.seconds=n+B,this.fractions=Math.round(H*(t-n)),e}return 1e3*((t=this.seconds-B)+Math.round(this.fractions/H))}}]),T=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();s(this,n);var r=new _;return t instanceof _?r=t:d(t)?r.timestamp(t):function(e){return e instanceof Date}(t)&&r.timestamp(t.getTime()),e(this,n,[r])}return l(n,t),c(n,[{key:"pack",value:function(){if(E(this.value))throw new Error("OSC AtomicTimetag can not be encoded with empty value");var e=this.value,t=e.seconds,n=e.fractions,r=new Uint8Array(8),o=new DataView(r.buffer);return o.setInt32(0,t,!1),o.setInt32(4,n,!1),r}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof DataView))throw new Error("OSC AtomicTimetag expects an instance of type DataView");var n=e.getUint32(t,!1),r=e.getUint32(t+4,!1);return this.value=new _(n,r),this.offset=t+8,this.offset}}])}(M),W=function(t){function n(t){if(s(this,n),t&&!S(t))throw new Error("OSC AtomicBlob constructor expects value of type Uint8Array");return e(this,n,[t])}return l(n,t),c(n,[{key:"pack",value:function(){if(E(this.value))throw new Error("OSC AtomicBlob can not be encoded with empty value");var e=C(this.value.byteLength),t=new Uint8Array(e+4);return new DataView(t.buffer).setInt32(0,this.value.byteLength,!1),t.set(this.value,4),t}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof DataView))throw new Error("OSC AtomicBlob expects an instance of type DataView");var n=e.getInt32(t,!1);return this.value=new Uint8Array(e.buffer,t+4,n),this.offset=C(t+4+n),this.offset}}])}(M),R=function(t){function n(t){if(s(this,n),t&&!w(t))throw new Error("OSC AtomicFloat32 constructor expects value of type float");return e(this,n,[t])}return l(n,t),c(n,[{key:"pack",value:function(){return p(h(n.prototype),"pack",this).call(this,"setFloat32",4)}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(h(n.prototype),"unpackWithMethod",this).call(this,e,"getFloat32",4,t)}}])}(M),U=function(t){function n(t){if(s(this,n),t&&!w(t))throw new Error("OSC AtomicFloat64 constructor expects value of type float");return e(this,n,[t])}return l(n,t),c(n,[{key:"pack",value:function(){return p(h(n.prototype),"pack",this).call(this,"setFloat64",8)}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(h(n.prototype),"unpackWithMethod",this).call(this,e,"getFloat64",8,t)}}])}(M),V=BigInt("9223372036854775807"),F=BigInt("-9223372036854775808"),z=function(t){function n(t){if(s(this,n),t&&"bigint"!=typeof t)throw new Error("OSC AtomicInt64 constructor expects value of type BigInt");if(t&&(t<F||t>V))throw new Error("OSC AtomicInt64 value is out of bounds");var r;return t&&(r=BigInt.asIntN(64,t)),e(this,n,[r])}return l(n,t),c(n,[{key:"pack",value:function(){return p(h(n.prototype),"pack",this).call(this,"setBigInt64",8)}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(h(n.prototype),"unpackWithMethod",this).call(this,e,"getBigInt64",8,t)}}])}(M),q=BigInt("18446744073709551615"),G=function(t){function n(t){if(s(this,n),t&&"bigint"!=typeof t)throw new Error("OSC AtomicUInt64 constructor expects value of type BigInt");if(t&&(t<0||t>q))throw new Error("OSC AtomicUInt64 value is out of bounds");var r;return t&&(r=BigInt.asUintN(64,t)),e(this,n,[r])}return l(n,t),c(n,[{key:"pack",value:function(){return p(h(n.prototype),"pack",this).call(this,"setBigUint64",8)}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(h(n.prototype),"unpackWithMethod",this).call(this,e,"getBigUint64",8,t)}}])}(M),X=!0,Y=!1,K=null,$=1/0,Z=c((function e(t,n){var r=this;if(s(this,e),this.offset=0,this.address="",this.types="",this.args=[],!E(t)){if(!v(t)&&!m(t))throw new Error("OSC Message constructor first argument (address) must be a string or array");this.address=A(t)}if(!E(n)){if(!m(n))throw new Error("OSC Message constructor second argument (args) must be an array");n.forEach((function(e){return r.add(e.type,e.value)}))}}),[{key:"add",value:function(e,t){if(E(e))throw new Error("OSC Message needs a valid OSC Atomic Data Type");"N"===e?this.args.push(K):"T"===e?this.args.push(X):"F"===e?this.args.push(Y):"I"===e?this.args.push($):this.args.push(t),this.types+=e}},{key:"pack",value:function(){var e=this;if(0===this.address.length||"/"!==this.address[0])throw new Error("OSC Message has an invalid address");var t=new j;if(t.add(new L(this.address)),t.add(new L(",".concat(this.types))),this.args.length>0){var n;if(this.args.length>this.types.length)throw new Error("OSC Message argument and type tag mismatch");this.args.forEach((function(r,o){var i=e.types[o];if("i"===i)n=new N(r);else if("h"===i)n=new z(r);else if("t"===i)n=new G(r);else if("f"===i)n=new R(r);else if("d"===i)n=new U(r);else if("s"===i)n=new L(r);else if("b"===i)n=new W(r);else if("T"===i)n=X;else if("F"===i)n=Y;else if("N"===i)n=K;else{if("I"!==i)throw new Error("OSC Message found unknown argument type");n=$}t.add(n)}))}return t.merge()}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof DataView))throw new Error("OSC Message expects an instance of type DataView.");var n=new L;n.unpack(e,t);var r=new L;if(r.unpack(e,n.offset),0===n.value.length||"/"!==n.value[0])throw new Error("OSC Message found malformed or missing address string");if(0===r.value.length&&","!==r.value[0])throw new Error("OSC Message found malformed or missing type string");for(var o,i,s=r.offset,a=[],c=1;c<r.value.length;c+=1){if(o=null,"i"===(i=r.value[c]))o=new N;else if("h"===i)o=new z;else if("t"===i)o=new G;else if("f"===i)o=new R;else if("d"===i)o=new U;else if("s"===i)o=new L;else if("b"===i)o=new W;else if("T"===i)a.push(X);else if("F"===i)a.push(Y);else if("N"===i)a.push(K);else{if("I"!==i)throw new Error("OSC Message found unsupported argument type");a.push($)}o&&(s=o.unpack(e,s),a.push(o.value))}return this.offset=s,this.address=n.value,this.types=r.value,this.args=a,this.offset}}]),J=function(t){function n(t){var r,o;s(this,n);for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return a.length>0&&a[0]instanceof Array&&(o=a.shift()),r=e(this,n,[t,o]),a.length>0&&(r.types=a.map((function(e){return P(e)})).join(""),r.args=a),r}return l(n,t),c(n,[{key:"add",value:function(e){p(h(n.prototype),"add",this).call(this,P(e),e)}}])}(Z),Q="#bundle",ee=function(){function e(){var t=this;s(this,e),this.offset=0,this.timetag=new T,this.bundleElements=[];for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.length>0&&(r[0]instanceof Date||d(r[0])?this.timetag=new T(r[0]):m(r[0])?(r[0].forEach((function(e){t.add(e)})),r.length>1&&(r[1]instanceof Date||d(r[1]))&&(this.timetag=new T(r[1]))):r.forEach((function(e){t.add(e)})))}return c(e,[{key:"timestamp",value:function(e){if(!d(e))throw new Error("OSC Bundle needs an integer for setting the timestamp");this.timetag=new T(e)}},{key:"add",value:function(t){if(!(t instanceof J||t instanceof e))throw new Error("OSC Bundle contains only Messages and Bundles");this.bundleElements.push(t)}},{key:"pack",value:function(){var e=new j;return e.add(new L(Q)),this.timetag||(this.timetag=new T),e.add(this.timetag),this.bundleElements.forEach((function(t){e.add(new N(t.pack().byteLength)),e.add(t)})),e.merge()}},{key:"unpack",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t instanceof DataView))throw new Error("OSC Bundle expects an instance of type DataView");var r=new L;if(r.unpack(t,n),r.value!==Q)throw new Error("OSC Bundle does not contain a valid #bundle head");var o=new T,i=o.unpack(t,r.offset);for(this.bundleElements=[];i<t.byteLength;){var s=new L;i=(new N).unpack(t,i);var a=void 0;s.unpack(t,i),i=(a=s.value===Q?new e:new J).unpack(t,i),this.bundleElements.push(a)}return this.offset=i,this.timetag=o,this.offset}}])}(),te=c((function e(t){if(s(this,e),t&&!(t instanceof J||t instanceof ee))throw new Error("OSC Packet value has to be Message or Bundle");this.value=t,this.offset=0}),[{key:"pack",value:function(){if(!this.value)throw new Error("OSC Packet can not be encoded with empty body");return this.value.pack()}},{key:"unpack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e instanceof DataView))throw new Error("OSC Packet expects an instance of type DataView");if(e.byteLength%4!=0)throw new Error("OSC Packet byteLength has to be a multiple of four");var n,r=new L;return r.unpack(e,t),(n=r.value===Q?new ee:new J).unpack(e,t),this.offset=n.offset,this.value=n,this.offset}}]),ne={discardLateMessages:!1},re=c((function e(t){s(this,e),this.options=o(o({},ne),t),this.addressHandlers=[],this.eventHandlers={open:[],error:[],close:[]},this.uuid=0}),[{key:"dispatch",value:function(e,t){var n=this;if(!(e instanceof te))throw new Error("OSC EventHander dispatch() accepts only arguments of type Packet");if(!e.value)throw new Error("OSC EventHander dispatch() can't read empty Packets");if(e.value instanceof ee){var r=e.value;return r.bundleElements.forEach((function(e){if(e instanceof ee){if(r.timetag.value.timestamp()<e.timetag.value.timestamp())throw new Error("OSC Bundle timestamp is older than the timestamp of enclosed Bundles");return n.dispatch(new te(e))}if(e instanceof J){var o=e;return n.notify(o.address,o,r.timetag.value.timestamp(),t)}throw new Error("OSC EventHander dispatch() can't dispatch unknown Packet value")}))}if(e.value instanceof J){var o=e.value;return this.notify(o.address,o,0,t)}throw new Error("OSC EventHander dispatch() can't dispatch unknown Packet value")}},{key:"call",value:function(e,t,n){var r=!1;if(v(e)&&e in this.eventHandlers)return this.eventHandlers[e].forEach((function(e){e.callback(t,n),r=!0})),r;var o=Object.keys(this.addressHandlers),i=this.addressHandlers;return o.forEach((function(o){var s=!1,a=new RegExp(I(A(e)),"g");if(a.test(o)&&o.length===a.lastIndex&&(s=!0),!s){var c=new RegExp(I(A(o)),"g");c.test(e)&&e.length===c.lastIndex&&(s=!0)}s&&i[o].forEach((function(e){e.callback(t,n),r=!0}))})),r}},{key:"notify",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("OSC EventHandler can not be called without any argument");try{if(t[0]instanceof te)return this.dispatch(t[0],t[1]);if(t[0]instanceof ee||t[0]instanceof J)return this.dispatch(new te(t[0]),t[1]);if(!v(t[0])){var r=new te;return r.unpack(function(e){return e.buffer?new DataView(e.buffer):e instanceof ArrayBuffer?new DataView(e):new DataView(new Uint8Array(e))}(t[0])),this.dispatch(r,t[1])}var o=t[0],i=null;t.length>1&&(i=t[1]);var s=null;if(t.length>2)if(d(t[2]))s=t[2];else{if(!(t[2]instanceof Date))throw new Error("OSC EventHandler timestamp has to be a number or Date");s=t[2].getTime()}var a=null;if(t.length>=3&&(a=t[3]),s){var c=Date.now();if(c>s&&!this.options.discardLateMessages)return this.call(o,i,a);var u=this;return setTimeout((function(){u.call(o,i,a)}),s-c),!0}return this.call(o,i,a)}catch(e){return this.notify("error",e),!1}}},{key:"on",value:function(e,t){if(!v(e)&&!m(e))throw new Error("OSC EventHandler accepts only strings or arrays for address patterns");if(!b(t))throw new Error("OSC EventHandler callback has to be a function");this.uuid+=1;var n={id:this.uuid,callback:t};if(v(e)&&e in this.eventHandlers)return this.eventHandlers[e].push(n),this.uuid;var r=A(e);return r in this.addressHandlers||(this.addressHandlers[r]=[]),this.addressHandlers[r].push(n),this.uuid}},{key:"off",value:function(e,t){if(!v(e)&&!m(e))throw new Error("OSC EventHandler accepts only strings or arrays for address patterns");if(!d(t))throw new Error("OSC EventHandler subscription id has to be a number");var n,r;return v(e)&&e in this.eventHandlers?(n=e,r=this.eventHandlers):(n=A(e),r=this.addressHandlers),n in r&&r[n].some((function(e,o){return e.id===t&&(r[n].splice(o,1),!0)}))}}]),oe=c((function e(){if(s(this,e),this.constructor===e)throw new Error("Plugin is an abstract class. Please create or use an implementation!")}),[{key:"status",value:function(){throw new Error("Abstract method!")}},{key:"open",value:function(){throw new Error("Abstract method!")}},{key:"close",value:function(){throw new Error("Abstract method!")}},{key:"send",value:function(e){throw new Error("Abstract method!")}}]),ie=function(t){function n(){throw s(this,n),e(this,n),new Error("DatagramPlugin can not be used in browser context")}return l(n,t),c(n,[{key:"registerNotify",value:function(e){this.notify=e}},{key:"status",value:function(){return this.socketStatus}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o(o({},this.options.open),t),r=n.port,i=n.exclusive;this.socketStatus=0,this.socket.bind({address:n.host,port:r,exclusive:i},(function(){e.socketStatus=1,e.notify("open")}))}},{key:"close",value:function(){var e=this;this.socketStatus=2,this.socket.close((function(){e.socketStatus=3,e.notify("close")}))}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o(o({},this.options.send),t),r=n.port,i=n.host;this.socket.send(Buffer.from(e),0,e.byteLength,r,i)}}])}(oe),se="undefined"!=typeof WebSocket?WebSocket:"undefined"!=typeof MozWebSocket?MozWebSocket:void 0!==n.g?n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?window.WebSocket||window.MozWebSocket:"undefined"!=typeof self?self.WebSocket||self.MozWebSocket:void 0,ae=void 0,ce={udpServer:{host:"localhost",port:41234,exclusive:!1},udpClient:{host:"localhost",port:41235},wsServer:{host:"localhost",port:8080},receiver:"ws"};function ue(e,t){return o(o(o(o({},ce),e),t),{},{udpServer:o(o(o({},ce.udpServer),e.udpServer),t.udpServer),udpClient:o(o(o({},ce.udpClient),e.udpClient),t.udpClient),wsServer:o(o(o({},ce.wsServer),e.wsServer),t.wsServer)})}var le=function(t){function n(){throw s(this,n),e(this,n),new Error("BridgePlugin can not be used in browser context")}return l(n,t),c(n,[{key:"registerNotify",value:function(e){this.notify=e}},{key:"status",value:function(){return this.socketStatus}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ue(this.options,t);this.socketStatus=0,this.socket.bind({address:n.udpServer.host,port:n.udpServer.port,exclusive:n.udpServer.exclusive},(function(){var t={};n.wsServer.server?t.server=n.wsServer.server:t=n.wsServer,e.websocket=new ae(t),e.websocket.binaryType="arraybuffer",e.websocket.on("listening",(function(){e.socketStatus=1,e.notify("open")})),e.websocket.on("error",(function(t){e.notify("error",t)})),e.websocket.on("connection",(function(t){t.on("message",(function(t,n){e.send(t,{receiver:"udp"}),e.notify(new Uint8Array(t),n)}))}))}))}},{key:"close",value:function(){var e=this;this.socketStatus=2,this.socket.close((function(){e.websocket.close((function(){e.socketStatus=3,e.notify("close")}))}))}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ue(this.options,t),r=n.receiver;if("udp"===r){var o=e instanceof Buffer?e:Buffer.from(e);this.socket.send(o,0,o.byteLength,n.udpClient.port,n.udpClient.host)}else{if("ws"!==r)throw new Error("BridgePlugin can not send message to unknown receiver");this.websocket.clients.forEach((function(t){t.send(e,{binary:!0})}))}}}])}(oe),he={host:"localhost",port:8080,secure:!1,protocol:[]},fe=function(t){function n(t){var r;if(s(this,n),r=e(this,n),!se)throw new Error("WebsocketClientPlugin can't find a WebSocket class");return r.options=o(o({},he),t),r.socket=null,r.socketStatus=-1,r.notify=function(){},r}return l(n,t),c(n,[{key:"registerNotify",value:function(e){this.notify=e}},{key:"status",value:function(){return this.socketStatus}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o(o({},this.options),t),r=n.port,i=n.host,s=n.secure,a=n.protocol;this.socket&&this.close();var c=s?"wss":"ws",u={address:i,family:c,port:r,size:0};this.socket=new se("".concat(c,"://").concat(i,":").concat(r),a),this.socket.binaryType="arraybuffer",this.socketStatus=0,this.socket.onopen=function(){e.socketStatus=1,e.notify("open")},this.socket.onclose=function(){e.socketStatus=3,e.notify("close")},this.socket.onerror=function(t){e.notify("error",t)},this.socket.onmessage=function(t){e.notify(t.data,u)}}},{key:"close",value:function(){this.socketStatus=2,this.socket.close()}},{key:"send",value:function(e){this.socket.send(e)}}])}(oe),pe=function(t){function n(t){throw s(this,n),e(this,n),new Error("WebsocketServerPlugin can not be used in browser context")}return l(n,t),c(n,[{key:"registerNotify",value:function(e){this.notify=e}},{key:"status",value:function(){return this.socketStatus}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o(o({},this.options),t),r=n.port,i=n.host,s={address:i,family:"wsserver",port:r,size:0};this.socket&&this.close(),n.server?this.socket=new ae({server:n.server}):this.socket=new ae({host:i,port:r}),this.socket.binaryType="arraybuffer",this.socketStatus=0,this.socket.on("listening",(function(){e.socketStatus=1,e.notify("open")})),this.socket.on("error",(function(t){e.notify("error",t)})),this.socket.on("connection",(function(t){t.on("message",(function(t){e.notify(new Uint8Array(t),s)}))}))}},{key:"close",value:function(){var e=this;this.socketStatus=2,this.socket.close((function(){e.socketStatus=3,e.notify("close")}))}},{key:"send",value:function(e){this.socket.clients.forEach((function(t){t.send(e,{binary:!0})}))}}])}(oe),de={discardLateMessages:!1},we=c((function e(t){if(s(this,e),t&&!k(t))throw new Error("OSC options argument has to be an object.");this.options=o(o({},de),t),this.options.plugin||(this.options.plugin=new fe),this.eventHandler=new re({discardLateMessages:this.options.discardLateMessages});var n=this.eventHandler;this.options.plugin&&this.options.plugin.registerNotify&&this.options.plugin.registerNotify((function(){return n.notify.apply(n,arguments)}))}),[{key:"on",value:function(e,t){if(!v(e)||!b(t))throw new Error("OSC on() needs event- or address string and callback function");return this.eventHandler.on(e,t)}},{key:"off",value:function(e,t){if(!v(e)||!d(t))throw new Error("OSC off() needs string and number (subscriptionId) to unsubscribe");return this.eventHandler.off(e,t)}},{key:"open",value:function(e){if(e&&!k(e))throw new Error("OSC open() options argument needs to be an object");if(!this.options.plugin||!b(this.options.plugin.open))throw new Error("OSC Plugin API #open is not implemented!");return this.options.plugin.open(e)}},{key:"status",value:function(){if(!this.options.plugin||!b(this.options.plugin.status))throw new Error("OSC Plugin API #status is not implemented!");return this.options.plugin.status()}},{key:"close",value:function(){if(!this.options.plugin||!b(this.options.plugin.close))throw new Error("OSC Plugin API #close is not implemented!");return this.options.plugin.close()}},{key:"send",value:function(e,t){if(!this.options.plugin||!b(this.options.plugin.send))throw new Error("OSC Plugin API #send is not implemented!");if(!(e instanceof Z||e instanceof J||e instanceof ee||e instanceof te))throw new Error("OSC send() needs Messages, Bundles or Packets");if(t&&!k(t))throw new Error("OSC send() options argument has to be an object");return this.options.plugin.send(e.pack(),t)}}]);return we.STATUS={IS_NOT_INITIALIZED:-1,IS_CONNECTING:0,IS_OPEN:1,IS_CLOSING:2,IS_CLOSED:3},we.Packet=te,we.Bundle=ee,we.Message=J,we.TypedMessage=Z,we.Plugin=oe,we.DatagramPlugin=ie,we.WebsocketClientPlugin=fe,we.WebsocketServerPlugin=pe,we.BridgePlugin=le,we}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";let e,t=!1,r=[];function o(e){var t=new Blob(r,{type:"video/webm"}),n=document.createElement("video");n.setAttribute("id",Date.now()),n.controls=!0,n.style.display="none",document.body.appendChild(n),n.src=window.URL.createObjectURL(t);var o=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.href=o,i.download="newVid.webm",i.click(),window.URL.revokeObjectURL(o)}const i=new(n(753));let s,a,c,u,l,h=!0,f=0,p=!1,d=!1;function w(e){h=e,f=window.performance.now(),i.on("/depth",(e=>{!function(e){if(f=window.performance.now(),d=!0,a={x:e.args[3],y:e.args[4],z:e.args[5]},p=boolean(e.args[6]),h){u=e.args[0],l=e.args[1],s=e.args[2];try{let e=u*l;for(let t=0;t<e;t++){let e=s[t];c[t]=int(.9*c[t]),c[t]+=int(.1*e)}}catch(t){console.log("data not defined yet"),c=Array.from(e.args[2])}}}(e)}));try{i.open({port:8025})}catch(e){console.log("Could not connect: "+e)}console.log("port open"),setInterval((function(){window.performance.now()-f>2e3&&(d=!1,p=!1,w(h),console.log(`Elapsed time since lastOSC: ${window.performance.now()-f} ms`))}),2e3)}const v=new class{constructor(){this._pageWidth=1080,this._pageHeight=1920,this._vw=1,this._vh=1,this._screens=[{x:0,y:0,w:100,h:100,cntX:50,cntY:50}],this._position=null,this._posNormal=null}get pageWidth(){return this._pageWidth}get pageHeight(){return this._pageHeight}get vw(){return this._vw}set vw(e){this._vw=e}get vh(){return this._vh}set vh(e){this._vh=e}get screens(){return this._screens}updateScreen(e,t){e>=0&&e<this._screens.length&&(this._screens[e]=t)}get position(){return this._position}set position(e){this._position=e}get posNormal(){return this._posNormal}set posNormal(e){this._posNormal=e}};let g,y,m=0,k=9,b=!1,S=!0,E=!1,O=255,C=!1;function x(e){e.resizeCanvas(I(),j()),A(e);try{e.windowResized()}catch(e){}}function P(e,t,n,r){let o=.9;v.posNormal.mult(o),v.posNormal.x+=t*(1-o),v.posNormal.y+=n*(1-o),v.posNormal.z+=r*(1-o),v.position.x=v.posNormal.x*e.width,v.position.y=v.posNormal.y*e.height,v.position.z=v.posNormal.z}function A(e){let t=I(),n=j(),r=0,o=0;try{e._renderer.drawingContext instanceof WebGLRenderingContext&&(r=-Math.floor(t/2),o=-Math.floor(n/2))}catch(e){}for(let r=0;r<v.screens.length;r++)v.screens[r].w=e.floor(t/v.screens.length),v.screens[r].h=n,v.screens[r].x=v.screens[r].w*r,v.screens[r].y=0,v.screens[r].cntX=v.screens[r].x+v.screens[r].w/2,v.screens[r].cntY=v.screens[r].h/2;v.vw=.01*t,v.vh=.01*n,e.poster.position=v.position,e.poster.posNormal=v.posNormal,e.poster.vh=v.vh,e.poster.vw=v.vw,e.poster.screens=v.screens}function I(){let e,t=window.innerWidth,n=window.innerHeight,r=v.pageWidth/v.pageHeight;return v.pageHeight,v.pageWidth,e=t<n*r?t:Math.floor(n*r),e}function j(){let e,t=window.innerWidth,n=window.innerHeight,r=v.pageWidth/v.pageHeight,o=v.pageHeight/v.pageWidth;return e=t<n*r?Math.floor(t*o):n,b=n==screen.height||t==screen.height||t==screen.width||n==screen.width,e}function M(){k>0?k--:k=9}p5.prototype.poster=class{},p5.prototype.poster.getCounter=function(){let e=document.querySelector("body").getAttribute("id");return""!=e?isNaN(e)||null==e?k:(S=!1,C=!0,e=parseInt(e),e):k},p5.prototype.registerMethod("init",(function(){console.log("P5 version"+p5.VERSION),console.log("init"),this.poster=this.poster||{},v.position=p5.prototype.createVector(0,0,0),v.posNormal=p5.prototype.createVector(0,0,0),g=window,w(true),this.poster.position=v.position,this.poster.posNormal=v.posNormal,y=setInterval(M,2e3)})),p5.prototype.registerMethod("post",(function(){let e=this;if(!b&&S?(e.cursor(),function(e){let t=v.vw,n=v.vh,r=v.screens,o=v.position;e.push(),e._renderer.drawingContext instanceof WebGL2RenderingContext&&e.translate(-e.width/2,-e.height/2,0),e.fill(0,180,180),e.noStroke(),m*=.9,m+=.1*e.frameRate(),e.textSize(2.2*t),e.textAlign(e.LEFT,e.TOP),e.text("fps: "+Math.floor(m),r[0].x+t,r[0].y+1*n),e.text("Streaming: "+d,r[0].x+t,r[0].y+3*n),e.text("Tracking: "+p,r[0].x+t,r[0].y+5*n),e.text("Shift - r start record",r[0].x+t,r[0].y+7*n),e.text("Shift - s stop record ",r[0].x+t,r[0].y+8*n),e.text("Shift - p hide guides",r[0].x+t,r[0].y+9*n),e.noFill(),e.stroke(0,180,180),e.rectMode(e.CORNER),e.rect(r[0].x,r[0].y,e.width,e.height);for(let t=1;t<r.length;t++)r[t].w=e.floor(width/r.length),e.line(r[t].x,r[t].y,r[t].x,r[t].y+r[t].h);let i=(e.height-e.width)/2,s=i+e.width;e.line(r[0].x,i,r[0].x+r[0].w,i),e.line(r[0].x,s,r[0].x+r[0].w,s),e.fill(0,180,180),e.noStroke(),e.circle(o.x,o.y,10*o.z),e.pop()}(this)):e.noCursor(),O>0){let t=e.color(0,0,0,O);e.push(),e._renderer.drawingContext instanceof WebGL2RenderingContext&&e.translate(-e.width/2,-e.height/2,500),O-=1,e.fill(t),e.rect(0,0,e.width,e.height),e.pop()}})),p5.prototype.registerMethod("pre",(function(){let e=this;if(A(this),d&&null!=a)P(e,a.x,a.y,a.z),this.poster.depthData=c,this.poster.depthW=u,this.poster.depthH=l;else{let t=e.mouseX/e.width;t=e.constrain(t,0,1);let n=e.mouseY/e.height;n=e.constrain(n,0,1),P(e,t,n,1)}})),p5.prototype.registerMethod("afterSetup",(function(){let n=this;x(n),function(){r.length=0;let t=document.querySelector("canvas").captureStream(50);e=new MediaRecorder(t),e.ondataavailable=e=>{e.data.size&&r.push(e.data)},e.onstop=o}(),g.addEventListener("fullscreenchange",(e=>{document.fullscreenElement?(console.log(`Element: ${document.fullscreenElement.id} entered full-screen mode.`),b=!0,x(n)):(console.log("Leaving full-screen mode."),b=!1,x(n))})),g.addEventListener("resize",(e=>{x(n)})),n.mousePressed=function(){n.mouseButton===n.LEFT&0==C&&n.mouseX>0&&n.mouseY>0&&n.mouseX<n.width&&n.mouseY<n.height&&function(){let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}()};const i=new Set;n.keyPressed=function(n){if(!C){const{code:r}=n;i.has(r)||(i.add(r),console.log(i),(i.has("Shift")||i.has("ShiftLeft")&&i.has("KeyR")&&!t)&&function(){t=!0,e.start();const n=document.createElement("div");n.id="recordingSymbol";const r=document.createTextNode("â—‰");n.appendChild(r),n.style.cssText="position:absolute;top:;right:0%;z-index:10000;color:#FF0000;",document.body.appendChild(n)}(),(i.has("Shift")||i.has("ShiftLeft")&&i.has("KeyS")&&t)&&(t=!1,e.stop(),document.getElementById("recordingSymbol").remove()),i.has("ArrowUp")?(clearInterval(y),M(),E=!0):i.has("ArrowDown")&&(clearInterval(y),k<9?k++:k=0,E=!0),i.has("ShiftLeft")&&i.has("KeyP")&&(S=!S))}},n.keyReleased=function(e){i.delete(e.code)}})),p5.prototype.registerMethod("beforeSetup",(function(){A(this),this.width=I(),this.height=I()}))})(),{}})()));